(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[55],{1756:function(e,n,t){(e.exports=t(11)(!1)).push([e.i,"/* åˆ‡æ¢å¼€å…³å®¹å™¨ - é›†æˆåˆ°æ‹–åŠ¨æ  */\n.tw-md-toggle-container {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 2px 6px;\n  background: transparent;\n  gap: 6px;\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  z-index: 10;\n}\n\n/* æ¨¡å¼æŒ‡ç¤ºå™¨ - é›†æˆåˆ°æ‹–åŠ¨æ  */\n.tw-md-mode-indicator {\n  font-size: 14px;\n  color: var(--editorTheme3-commentText, #888);\n  margin-right: 8px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  opacity: 0.8;\n  transition: all 0.2s ease;\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);\n}\n\n.tw-md-mode-indicator.preview-mode {\n  color: #4CAF50;\n  opacity: 1;\n  font-weight: 600;\n}\n\n/* åˆ‡æ¢æŒ‰é’® - é›†æˆåˆ°æ‹–åŠ¨æ  */\n.tw-md-toggle-button {\n  background: rgba(var(--editorTheme3-commentBorder-rgb, 200, 200, 200), 0.3);\n  color: var(--editorTheme3-commentText, #555);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 6px;\n  padding: 6px 12px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  opacity: 0.8;\n  transition: all 0.2s ease;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  backdrop-filter: blur(2px);\n}\n\n.tw-md-toggle-button:hover {\n  opacity: 1;\n  background: rgba(var(--editorTheme3-commentBorder-rgb, 200, 200, 200), 0.5);\n}\n\n.tw-md-toggle-button:active {\n  transform: scale(0.95);\n}\n\n.tw-md-toggle-button[data-mode=\"preview\"] {\n  background: rgba(76, 175, 80, 0.3);\n  color: #2E7D32;\n  border-color: rgba(76, 175, 80, 0.3);\n}\n\n/* é¢„è§ˆå®¹å™¨ - æ— èƒŒæ™¯æ¡† */\n.tw-md-preview-container {\n  width: 100%;\n  height: 100%;\n  padding: 12px;\n  background: transparent;\n  color: var(--editorTheme3-commentText, #333);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  font-size: 16px;\n  line-height: 1.7;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  overflow-x: hidden;\n  box-sizing: border-box;\n  max-height: 100%;\n}\n\n/* é¢„è§ˆå†…å®¹æ ·å¼ */\n.tw-md-preview-container h1,\n.tw-md-preview-container h2,\n.tw-md-preview-container h3 {\n  margin-top: 8px;\n  margin-bottom: 6px;\n  font-weight: 600;\n  line-height: 1.3;\n}\n\n.tw-md-preview-container h1 {\n  font-size: 22px;\n  color: var(--editorTheme3-commentText, #333);\n  border-bottom: 2px solid var(--editorTheme3-commentBorder, #ddd);\n  padding-bottom: 6px;\n}\n\n.tw-md-preview-container h2 {\n  font-size: 20px;\n  color: var(--editorTheme3-commentText, #444);\n}\n\n.tw-md-preview-container h3 {\n  font-size: 18px;\n  color: var(--editorTheme3-commentText, #555);\n}\n\n\n.tw-md-preview-container strong {\n  font-weight: 600;\n  color: var(--editorTheme3-commentText, #333);\n}\n\n.tw-md-preview-container em {\n  font-style: italic;\n  color: var(--editorTheme3-commentText, #444);\n}\n\n.tw-md-preview-container code {\n  background-color: rgba(0, 0, 0, 0.08);\n  color: #d73a49;\n  padding: 3px 8px;\n  border-radius: 4px;\n  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;\n  font-size: 15px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n/* å¼•ç”¨å—æ ·å¼ */\n.tw-md-preview-container blockquote {\n  border-left: 4px solid #dfe2e5;\n  padding: 0 16px;\n  margin: 8px 0;\n  color: #6a737d;\n  background-color: #f8f9fa;\n  border-radius: 0 4px 4px 0;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.tw-md-preview-container pre code {\n  display: block;\n  padding: 12px 16px;\n  margin: 8px 0;\n  overflow-x: auto;\n  background-color: #f6f8fa;\n  border-radius: 4px;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.tw-md-preview-container a {\n  color: #0366d6;\n  text-decoration: none;\n  font-weight: 500;\n  border-bottom: 1px solid transparent;\n  transition: border-color 0.2s ease;\n}\n\n.tw-md-preview-container a:hover {\n  text-decoration: underline;\n  border-bottom-color: #0366d6;\n}\n\n.tw-md-preview-container ul {\n  margin: 8px 0;\n  padding-left: 20px;\n}\n\n.tw-md-preview-container li {\n  margin: 2px 0;\n  padding-left: 4px;\n}\n\n.tw-md-preview-container li::marker {\n  color: var(--editorTheme3-commentText, #666);\n}\n\n/* ç¡®ä¿æ³¨é‡Šæ¡†å†…çš„æ»šåŠ¨æ¡æ­£å¸¸æ˜¾ç¤º */\n.tw-md-preview-container::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n}\n\n.tw-md-preview-container::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 5px;\n}\n\n.tw-md-preview-container::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 5px;\n  border: 2px solid transparent;\n  background-clip: content-box;\n}\n\n.tw-md-preview-container::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.4);\n  border: 2px solid transparent;\n  background-clip: content-box;\n}\n\n/* ç¡®ä¿æ³¨é‡Šæ¡†æœ¬èº«æ”¯æŒæ»šåŠ¨ */\n.tw-md-preview-container {\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.3) rgba(0, 0, 0, 0.05);\n}\n",""])},1831:function(e,n,t){"use strict";t.r(n),t.d(n,"resources",(function(){return r}));var o=t(1756);const r={"userscript.js":async function(e){let{addon:n,console:t}=e;n.tab.traps.vm,await n.tab.traps.getBlockly();const o=()=>{if(n.self.disabled)return;document.querySelectorAll(".blocklyBubbleCanvas > g").forEach((e=>{var n;if(e.dataset.markdownProcessed)return;const o=e.querySelector("textarea");if(!o)return;const a=e.querySelector(".scratchCommentBody")||e.querySelector('[class*="TopBar"]')||e.firstElementChild;if(!a)return;e.dataset.markdownProcessed="true";const d=document.createElement("div");d.className="tw-md-toggle-container";const i=document.createElement("span");i.className="tw-md-mode-indicator",i.textContent="ç¼–è¾‘æ¨¡å¼";const c=document.createElement("button");c.className="tw-md-toggle-button",c.innerHTML="ðŸ“ ç¼–è¾‘",c.dataset.mode="edit",c.title="åˆ‡æ¢åˆ°é¢„è§ˆæ¨¡å¼ (Ctrl+M)",d.appendChild(i),d.appendChild(c);const l=document.createElement("div");l.className="tw-md-preview-container",l.style.display="none",d.appendChild(c),a.appendChild(d);const s=(null===(n=e.querySelector(".scratchCommentTextarea"))||void 0===n?void 0:n.parentElement)||o.parentElement;function p(){"edit"===c.dataset.mode?(c.dataset.mode="preview",c.innerHTML="ðŸŸ é¢„è§ˆ",c.title="åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ (Ctrl+M)",i.textContent="é¢„è§ˆæ¨¡å¼",i.classList.add("preview-mode"),o.style.display="none",l.style.display="block",r(o.value,l)):(c.dataset.mode="edit",c.innerHTML="ðŸ“ ç¼–è¾‘",c.title="åˆ‡æ¢åˆ°é¢„è§ˆæ¨¡å¼ (Ctrl+M)",i.textContent="ç¼–è¾‘æ¨¡å¼",i.classList.remove("preview-mode"),o.style.display="block",l.style.display="none",o.focus())}s&&s.appendChild(l),c.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),p()})),document.addEventListener("keydown",(n=>{if((n.ctrlKey||n.metaKey)&&"m"===n.key){const t=document.activeElement,r=t&&(t===o||t.closest("[data-markdown-processed]")===e),a="preview"===c.dataset.mode;(r||a)&&"true"===e.dataset.markdownProcessed&&(n.preventDefault(),p())}})),o.addEventListener("input",(()=>{"preview"===c.dataset.mode&&r(o.value,l)})),t.log("Processed comment element:",e)}))};function r(e,n){n.innerHTML="";let t=e.replace(/^> (.*$)/gm,"<blockquote>$1</blockquote>").replace(/^### (.*$)/gm,"<h3>$1</h3>").replace(/^## (.*$)/gm,"<h2>$1</h2>").replace(/^# (.*$)/gm,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/gm,"<strong>$1</strong>").replace(/\*(.*?)\*/gm,"<em>$1</em>").replace(/```([\s\S]*?)```/gm,"<pre><code>$1</code></pre>").replace(/`(.*?)`/gm,"<code>$1</code>").replace(/!\[([^\]]*)\]\(([^)]+)\)/gm,'<img src="$2" alt="$1" style="max-width: 100%; height: auto; border-radius: 4px; margin: 8px 0;">').replace(/\[([^\]]+)\]\(([^)]+)\)/gm,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/^\* (.*$)/gm,"<li>$1</li>").replace(/^- (.*$)/gm,"<li>$1</li>").replace(/\n/g,"<br>");t=t.replace(/(<li>[^]*<\/li>)/,"<ul>$1</ul>"),n.innerHTML=t}new MutationObserver((e=>{let n=!1;e.forEach((e=>{e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&(e.matches&&e.matches(".blocklyBubbleCanvas > g")||e.querySelector&&e.querySelector(".blocklyBubbleCanvas > g"))&&(n=!0)}))})),n&&setTimeout(o,100)})).observe(document.body,{childList:!0,subtree:!0}),setTimeout(o,1e3),setInterval(o,2e3),n.self.addEventListener("disabled",(()=>{const e=document.querySelectorAll(".tw-md-toggle-container"),n=document.querySelectorAll(".tw-md-preview-container");e.forEach((e=>e.remove())),n.forEach((e=>e.remove()));document.querySelectorAll("[data-markdown-processed]").forEach((e=>{delete e.dataset.markdownProcessed;const n=e.querySelector("textarea");n&&(n.style.display="block")})),t.log("Markdown comment editor addon disabled")})),n.self.addEventListener("enabled",(()=>{setTimeout(o,500),t.log("Markdown comment editor addon enabled")})),t.log("Markdown comment editor addon loaded")},"userstyle.css":t.n(o).a}}}]);